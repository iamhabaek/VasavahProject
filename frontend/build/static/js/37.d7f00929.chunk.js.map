{"version":3,"sources":["app/views/subjects/EditSubjects.js","../node_modules/nanoid/index.browser.js","../node_modules/react-bootstrap/esm/Spinner.js"],"names":["basicFormSchema","yup","shape","subjectName","required","units","EditSubjects","history","useHistory","useContext","AppContext","dispatch","user","subjects","token","id","useParams","useState","loading","setLoading","subject","find","handleSubmit","values","a","updatedSubject","notifications","nanoid","created","Date","now","email","isViewed","action","content","name","location","description","Swal","fire","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","updateSubject","console","log","handleCancel","text","icon","confirmButtonColor","cancelButtonColor","push","routeSegments","path","className","initialValues","validationSchema","onSubmit","errors","touched","handleChange","handleBlur","isSubmitting","noValidate","classList","htmlFor","type","placeholder","value","onChange","onBlur","disabled","variant","as","size","role","aria-hidden","animation","onClick","crypto","getRandomValues","Uint8Array","reduce","byte","toString","toUpperCase","Spinner","React","forwardRef","_ref","ref","bsPrefix","children","_ref$as","Component","props","_objectWithoutPropertiesLoose","bsSpinnerPrefix","useBootstrapPrefix","createElement","_extends","classNames","displayName"],"mappings":"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","file":"static/js/37.d7f00929.chunk.js","sourcesContent":["import React, { useContext, useState, Fragment } from \"react\";\r\nimport { Breadcrumb } from \"@gull\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport AppContext from \"app/appContext\";\r\nimport * as yup from \"yup\";\r\nimport { classList } from \"@utils\";\r\nimport { Formik } from \"formik\";\r\nimport { updateSubject } from \"app/reducers/actions/ClassroomActions\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { Button, Spinner } from \"react-bootstrap\";\r\n\r\nimport Swal from \"sweetalert2\";\r\n// Validation schema\r\nconst basicFormSchema = yup.object().shape({\r\n  subjectName: yup.string().required(\"Subject Name is required\"),\r\n  units: yup.string().required(\"Unitsis required\"),\r\n});\r\n\r\nconst EditSubjects = () => {\r\n  const history = useHistory();\r\n  // Decclare states from context provider\r\n  const { dispatch, user, subjects, token } = useContext(AppContext);\r\n\r\n  const { id } = useParams();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const subject = subjects.find((subject) => subject.id === id);\r\n\r\n  // Submit update function\r\n  const handleSubmit = async (values) => {\r\n    const { subjectName, units } = values;\r\n    const updatedSubject = {\r\n      subjectName: subjectName,\r\n      units: units,\r\n    };\r\n    const notifications = {\r\n      id: nanoid(),\r\n      created: Date.now(),\r\n      user: user.email,\r\n      isViewed: false,\r\n      action: \"update\",\r\n      content: {\r\n        name: subjectName,\r\n        location: \"subject\",\r\n        description: \"click to see more information\",\r\n      },\r\n    };\r\n    Swal.fire({\r\n      title: \"Do you want to save the changes?\",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Save\",\r\n      denyButtonText: `Don't save`,\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        try {\r\n          setLoading(true);\r\n          await updateSubject(\r\n            id,\r\n            updatedSubject,\r\n            notifications,\r\n            token\r\n          )(dispatch);\r\n          await Swal.fire(\"Updated!\", \"Subject has been updated.\", \"success\");\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    });\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // Cancel edit redirect to list page\r\n  const handleCancel = async () => {\r\n    Swal.fire({\r\n      title: \"Confirm to cancel\",\r\n      text: \"Are you sure you want to cancel? If you cancel, all information that you have entered will be lost.\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Yes\",\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        history.push(\"/subjects/subjects-list\");\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb\r\n        routeSegments={[{ name: \"Home\", path: \"/\" }, { name: \"Edit Subject\" }]}\r\n      />\r\n      {subject && (\r\n        <div className=\"col-md-8\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <strong>\r\n                Please fill all the required (\r\n                <span className=\"text-danger\">*</span>) fields\r\n              </strong>\r\n            </div>\r\n            <Formik\r\n              initialValues={subject}\r\n              validationSchema={basicFormSchema}\r\n              onSubmit={handleSubmit}\r\n            >\r\n              {({\r\n                values,\r\n                errors,\r\n                touched,\r\n                handleChange,\r\n                handleBlur,\r\n                handleSubmit,\r\n                isSubmitting,\r\n              }) => {\r\n                return (\r\n                  <form\r\n                    className=\"needs-validation\"\r\n                    onSubmit={handleSubmit}\r\n                    noValidate\r\n                  >\r\n                    <div className=\"card-body\">\r\n                      <div className=\"form-row\">\r\n                        <div\r\n                          className={classList({\r\n                            \"col-md-4 mb-3\": true,\r\n                            \"valid-field\":\r\n                              !errors.subjectName && touched.subjectName,\r\n                            \"invalid-field\":\r\n                              errors.subjectName && touched.subjectName,\r\n                          })}\r\n                        >\r\n                          <label htmlFor=\"courseName\">\r\n                            Subject Name (<span className=\"text-danger\">*</span>\r\n                            )\r\n                          </label>\r\n                          <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            id=\"subjectName\"\r\n                            placeholder=\"Subject Name\"\r\n                            name=\"subjectName\"\r\n                            value={values.subjectName}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}\r\n                            required\r\n                          />\r\n                          <div className=\"invalid-feedback\">\r\n                            Subject name is required\r\n                          </div>\r\n                        </div>\r\n                        <div\r\n                          className={classList({\r\n                            \"col-md-4 mb-3\": true,\r\n                            \"valid-field\": !errors.units && touched.units,\r\n                            \"invalid-field\": errors.units && touched.units,\r\n                          })}\r\n                        >\r\n                          <label htmlFor=\"validationCustom202\">\r\n                            Units (<span className=\"text-danger\">*</span>)\r\n                          </label>\r\n                          <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            id=\"units\"\r\n                            placeholder=\"Units\"\r\n                            name=\"units\"\r\n                            value={values.units}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}\r\n                            required\r\n                          />\r\n                          <div className=\"invalid-feedback\">\r\n                            Units is required\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n                      <div className=\"mc-footer\">\r\n                        <Button\r\n                          disabled={loading}\r\n                          variant=\"success\"\r\n                          type=\"submit\"\r\n                          className=\"mr-2\"\r\n                        >\r\n                          {loading && (\r\n                            <Spinner\r\n                              as=\"span\"\r\n                              variant=\"light\"\r\n                              size=\"sm\"\r\n                              role=\"status\"\r\n                              aria-hidden=\"true\"\r\n                              animation=\"border\"\r\n                              className=\"mr-1\"\r\n                            />\r\n                          )}\r\n                          Save Changes\r\n                        </Button>\r\n                        <Button onClick={handleCancel} variant=\"danger\">\r\n                          Cancel\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                );\r\n              }}\r\n            </Formik>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default EditSubjects;\r\n","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Spinner = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      animation = _ref.animation,\n      size = _ref.size,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"variant\", \"animation\", \"size\", \"children\", \"as\", \"className\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'spinner');\n  var bsSpinnerPrefix = bsPrefix + \"-\" + animation;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsSpinnerPrefix, size && bsSpinnerPrefix + \"-\" + size, variant && \"text-\" + variant)\n  }), children);\n});\nSpinner.displayName = 'Spinner';\nexport default Spinner;"],"sourceRoot":""}